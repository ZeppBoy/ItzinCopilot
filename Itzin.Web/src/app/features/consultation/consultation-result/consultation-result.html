<div class="result-container">
  <div class="result-card">
    <h2>Your Hexagram</h2>

    @if (consultation) {
      <div class="result-content">
        @if (consultation.question) {
          <div class="question-section">
            <h3>Your Question</h3>
            <p class="question">{{ consultation.question }}</p>
          </div>
        }

        <div class="hexagram-section">
          <h3>Primary Hexagram</h3>
          <div class="hexagram-card" (click)="viewHexagram(consultation.primaryHexagram.id)">
            <div class="hexagram-content-wrapper">
              <div class="hexagram-visual">
                <div class="hexagram-number-badge">{{ consultation.primaryHexagram.number }}</div>
                <div class="hexagram-symbol">{{ consultation.primaryHexagram.unicode }}</div>
                <div class="hexagram-lines">
                  @for (line of getPrimaryHexagramLines().reverse(); track line.lineNumber) {
                    <div class="hexagram-line">
                      <img [src]="getLineImagePath(line)" [alt]="line.type + ' line'" />
                    </div>
                  }
                </div>
              </div>
              <div class="hexagram-info">
                <div class="hexagram-number-text">Hexagram {{ consultation.primaryHexagram.number }}</div>
                <div class="hexagram-name-chinese">{{ consultation.primaryHexagram.chineseName }}</div>
                <div class="hexagram-pinyin">{{ consultation.primaryHexagram.pinyin }}</div>
                <div class="hexagram-name">{{ consultation.primaryHexagram.englishName }}</div>
                <div class="hexagram-name-russian">{{ consultation.primaryHexagram.russianName }}</div>
                @if (consultation.primaryHexagram.judgment) {
                  <div class="hexagram-description">
                    <strong>Judgment:</strong> {{ consultation.primaryHexagram.judgment }}
                  </div>
                }
              </div>
            </div>
            <button type="button" class="btn-view" (click)="onViewButtonClick($event, consultation.primaryHexagram.id)">View Full Interpretation →</button>
          </div>
        </div>

        @if (consultation.relatingHexagram && consultation.changingLines && consultation.changingLines.length > 0) {
          <div class="changing-lines-section">
            <h3>Changing Lines</h3>
            <p class="changing-info">
              Lines {{ consultation.changingLines.join(', ') }} are changing
            </p>
          </div>

          <div class="hexagram-section">
            <h3>Relating Hexagram</h3>
            <div class="hexagram-card" (click)="viewHexagram(consultation.relatingHexagram.id)">
              <div class="hexagram-content-wrapper">
                <div class="hexagram-visual">
                  <div class="hexagram-number-badge">{{ consultation.relatingHexagram.number }}</div>
                  <div class="hexagram-symbol">{{ consultation.relatingHexagram.unicode }}</div>
                  <div class="hexagram-lines">
                    @for (line of getRelatingHexagramLines().reverse(); track line.lineNumber) {
                      <div class="hexagram-line">
                        <img [src]="getLineImagePath(line)" [alt]="line.type + ' line'" />
                      </div>
                    }
                  </div>
                </div>
                <div class="hexagram-info">
                  <div class="hexagram-number-text">Hexagram {{ consultation.relatingHexagram.number }}</div>
                  <div class="hexagram-name-chinese">{{ consultation.relatingHexagram.chineseName }}</div>
                  <div class="hexagram-pinyin">{{ consultation.relatingHexagram.pinyin }}</div>
                  <div class="hexagram-name">{{ consultation.relatingHexagram.englishName }}</div>
                  <div class="hexagram-name-russian">{{ consultation.relatingHexagram.russianName }}</div>
                  @if (consultation.relatingHexagram.judgment) {
                    <div class="hexagram-description">
                      <strong>Judgment:</strong> {{ consultation.relatingHexagram.judgment }}
                    </div>
                  }
                </div>
              </div>
              <button type="button" class="btn-view" (click)="onViewButtonClick($event, consultation.relatingHexagram.id)">View Full Interpretation →</button>
            </div>
          </div>
        }

        <div class="guidance-text">
          <p>
            Click on the hexagrams above to view their full interpretations and understand the guidance they offer.
          </p>
        </div>

        <div class="action-buttons">
          <button class="btn-primary" (click)="newConsultation()">
            New Consultation
          </button>
          <button class="btn-secondary" (click)="goToDashboard()">
            Back to Dashboard
          </button>
        </div>
      </div>
    } @else {
      <div class="loading">
        <p>Generating your consultation...</p>
      </div>
    }
  </div>
</div>
