<div class="hexagram-detail-container">
  @if (isLoading) {
    <div class="loading">
      <div class="spinner"></div>
      <p>Loading hexagram...</p>
    </div>
  }

  @if (errorMessage) {
    <div class="alert alert-error">
      {{ errorMessage }}
      <button class="btn-back" (click)="goBack()">Back to List</button>
    </div>
  }

  @if (!isLoading && hexagram) {
    <div class="hexagram-detail">
      <div class="detail-header">
        <button class="btn-back" (click)="goBack()">‚Üê Back</button>
        <div class="header-content">
          <div class="hexagram-number">Hexagram {{ hexagram.number }}</div>
          <h1 class="hexagram-chinese">{{ hexagram.chineseName }}</h1>
          <div class="hexagram-pinyin">{{ hexagram.pinyin }}</div>
          <h2 class="hexagram-name">{{ hexagram.englishName }}</h2>
        </div>
      </div>

      <div class="hexagram-body">
        <div class="hexagram-visual">
          <div class="hexagram-lines">
            @for (line of hexagram.lines; track line.position) {
              <div class="line" [class.yang]="line.type === 'yang'" [class.yin]="line.type === 'yin'">
                {{ getLineSymbol(line.type) }}
              </div>
            }
          </div>
          <div class="trigrams">
            <div class="trigram">
              <span class="label">Upper:</span>
              <span class="value">{{ hexagram.trigrams.upper }}</span>
            </div>
            <div class="trigram">
              <span class="label">Lower:</span>
              <span class="value">{{ hexagram.trigrams.lower }}</span>
            </div>
          </div>
        </div>

        <div class="hexagram-content">
          <section class="interpretation-section">
            <h3>The Judgment</h3>
            <div class="interpretation-text">
              <p>{{ hexagram.judgment.english }}</p>
            </div>
          </section>

          <section class="interpretation-section">
            <h3>The Image</h3>
            <div class="interpretation-text">
              <p>{{ hexagram.image.english }}</p>
            </div>
          </section>

          @if (hexagram.lines && hexagram.lines.length > 0) {
            <section class="interpretation-section">
              <h3>The Lines</h3>
              <div class="lines-list">
                @for (line of hexagram.lines; track line.position) {
                  <div class="line-interpretation">
                    <h4>Line {{ line.position }}</h4>
                    <p>{{ line.interpretation.english }}</p>
                  </div>
                }
              </div>
            </section>
          }
        </div>
      </div>
    </div>
  }
</div>
